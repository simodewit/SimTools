<Window x:Class="SimTools.Views.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:SimTools.Controls"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="#00000000"
        ShowInTaskbar="False"
        Topmost="True"
        Title="Overlay"
        Width="960" Height="540">

    <Grid>
        <Canvas x:Name="OverlayCanvas" ClipToBounds="True"/>

        <!-- Compact toolbar -->
        <Border x:Name="SideToolbar"
                Width="260"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                CornerRadius="12"
                Background="#F0131315"
                BorderBrush="#28FFFFFF"
                BorderThickness="1"
                Padding="10"
                Margin="0,0,18,0">
            <Border.Effect>
                <DropShadowEffect BlurRadius="14" Direction="270" ShadowDepth="2" Opacity="0.35"/>
            </Border.Effect>

            <StackPanel>
                <DockPanel>
                    <TextBlock Text="Overlay tools" FontWeight="SemiBold" Foreground="#F0FFFFFF" />
                    <Button Content="⤢" Width="26" Height="26" Margin="6,0,0,0"
                            HorizontalAlignment="Right" DockPanel.Dock="Right"
                            Background="#22FFFFFF" BorderBrush="#33FFFFFF" Foreground="#F0FFFFFF"
                            ToolTip="Collapse"
                            Click="CollapseToolbar_Click"/>
                </DockPanel>

                <Separator Margin="0,8,0,8" Opacity="0.2"/>

                <ItemsControl ItemsSource="{Binding ToolStates, RelativeSource={RelativeSource AncestorType=Window}}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <CheckBox Content="{Binding Descriptor.Name}"
                                      IsChecked="{Binding IsEnabled, Mode=TwoWay}"
                                      Margin="0,4,0,0"
                                      Foreground="#F0FFFFFF"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Separator Margin="0,8,0,8" Opacity="0.2"/>

                <TextBlock Text="Attach toolbar" Foreground="#D0FFFFFF" Margin="0,0,0,6"/>

                <UniformGrid Columns="4">
                    <Button Content="L" Command="{Binding SetMenuDockCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="Left"
                            Background="#1EFFFFFF" BorderBrush="#30FFFFFF" Foreground="#F0FFFFFF" />
                    <Button Content="R" Command="{Binding SetMenuDockCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="Right"
                            Background="#1EFFFFFF" BorderBrush="#30FFFFFF" Foreground="#F0FFFFFF" />
                    <Button Content="T" Command="{Binding SetMenuDockCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="Top"
                            Background="#1EFFFFFF" BorderBrush="#30FFFFFF" Foreground="#F0FFFFFF" />
                    <Button Content="B" Command="{Binding SetMenuDockCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="Bottom"
                            Background="#1EFFFFFF" BorderBrush="#30FFFFFF" Foreground="#F0FFFFFF" />
                </UniformGrid>

                <Button Content="Close overlay"
                        Margin="0,8,0,0"
                        Command="{Binding CloseOverlayCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                        Background="#2A66C2FF" BorderBrush="#3A7BCAFF" Foreground="White"/>
            </StackPanel>
        </Border>

        <!-- Collapsed puck -->
        <Button x:Name="CollapsedPuck"
                Width="34" Height="34"
                Visibility="Collapsed"
                Background="#F0131315" BorderBrush="#28FFFFFF" BorderThickness="1"
                Foreground="#F0FFFFFF"
                Content="◀"
                Click="ExpandToolbar_Click">
            <Button.Effect>
                <DropShadowEffect BlurRadius="14" Direction="270" ShadowDepth="2" Opacity="0.35"/>
            </Button.Effect>
        </Button>
    </Grid>
</Window>
